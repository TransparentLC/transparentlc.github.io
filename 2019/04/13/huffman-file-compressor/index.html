<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">

    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source">



    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">







    <link rel="dns-prefetch" href="https://lib.baomitu.com">





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Huffman 编码・改：压缩文件 | 
        
        存在感消失的地方|ω•`)
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="../../../../img/favicon.png">
    <link rel="icon" href="../../../../img/favicon.png">

    <meta name="format-detection" content="telephone=no">
    <meta name="description" itemprop="description" content>
    <meta name="keywords" content>
    <meta name="theme-color" content="#e16b8c">

    <!-- Disable Fucking Bloody Baidu Transformation -->
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    
    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/css/material.min.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/css/style.min.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  /* Animated Underline On Links */
  a {
    color: #db4d6d;
    position: relative;
    text-decoration: none;
  }

  a:after {
    content: "";
    width: 0;
    height: 1px;
    background: #db4d6d;
    position: absolute;
    top: 100%;
    left: 50%;
    transition: all .2s;
  }

  a:hover:after {
    left: 0%;
    width: 100%;
  }
  
  .article-headline-p > a:after, .index-top-block-slogan > a:after, .something-else-logo > a:after, .footer-develop-div > a:after, .post-toc-item > a:after, a.next-content:after, a.prev-content:after {
    background: transparent;
  }
  
  video {
    width: 100%;
    border-radius: 2px;
  }
  
  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #e16b8c !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #e16b8c !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #e16b8c !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #db4d6d;
    text-decoration: underline;
  }
  
  /* Horizontal Scroll Bar For Code */
  pre.prettyprint > ol {
    white-space: pre !important;
    overflow-x: auto !important;
  }
</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #f5f5f5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>


<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <style>
        @font-face {
            font-family: Roboto;
            font-style: normal;
            font-weight: 300;
            src: url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.eot);
            src: local('Roboto'),local('Roboto-Normal'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.eot?#iefix) format('embedded-opentype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.woff2) format('woff2'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.woff) format('woff'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.ttf) format('truetype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.svg#Roboto) format('svg')
        }

        @font-face {
            font-family: Roboto;
            font-style: normal;
            font-weight: regular;
            src: url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.eot);
            src: local('Roboto'),local('Roboto-Normal'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.eot?#iefix) format('embedded-opentype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.woff2) format('woff2'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.woff) format('woff'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.ttf) format('truetype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.svg#Roboto) format('svg')
        }

        @font-face {
            font-family: Roboto;
            font-style: normal;
            font-weight: 500;
            src: url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.eot);
            src: local('Roboto'),local('Roboto-Normal'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.eot?#iefix) format('embedded-opentype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.woff2) format('woff2'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.woff) format('woff'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.ttf) format('truetype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.svg#Roboto) format('svg')
        }
    </style>


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/css/material-icons.css",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>



<!-- Import highlight.js Visual Studio Dark Theme -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@latest/build/styles/vs2015.min.css">
<style>
  pre {
      background-color: #1e1e1e !important;
      font-size: 15px !important;
  }

  .hljs {
      margin: 0 0 0 0 !important;
      padding-left: 0 !important;
      line-height: 1.5em !important;
      list-style: none !important;
      counter-reset: item;
  }

  /* Style of line numbers */
  .hljs > li:before {
      content: counter(item);
      counter-increment: item;
      display: inline-block;
      text-align: right;
      min-width: 2em;
      margin-right: 1em;
      color: #2b91af;
  }

  /* Add line numbers by RegEx replacing, hide empty line in the end of code block */
  .hljs > li:last-of-type, code.plain > li:last-of-type, code.text > li:last-of-type {
      display: none;
  }

  .hljs-comment {
      font-style: normal;
  }

  /* Disable line numbers in plain text */
  code.plain, code.text {
      list-style: none !important;
      color: #dcdcdc;
  }
</style>

    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="存在感消失的地方|ω•`)">
    <meta name="msapplication-starturl" content="https://transparentlc.github.io">
    <meta name="msapplication-navbutton-color" content="#e16b8c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="存在感消失的地方|ω•`)">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="../../../../img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://transparentlc.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Huffman 编码・改：压缩文件 | 存在感消失的地方|ω•`)">
    <meta property="og:image" content="../../../../img/favicon.png">
    <meta property="og:description" content>
    

    
        <meta property="article:published_time" content="Sat Apr 13 2019 16:06:43 GMT+0800">
        <meta property="article:modified_time" content="Sun Apr 14 2019 13:52:34 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://transparentlc.github.io">
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://transparentlc.github.io",
    "headline": "Huffman 编码・改：压缩文件",
    "datePublished": "Sat Apr 13 2019 16:06:43 GMT+0800",
    "dateModified": "Sun Apr 14 2019 13:52:34 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "✨小透明・宸✨",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.jpg"
        },
        "description": "身处寒夜 把握星光✨"
    },
    "publisher": {
        "@type": "Organization",
        "name": "存在感消失的地方|ω•`)",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": "",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn" class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#自动读取字符集"><span class="post-toc-number">1.</span> <span class="post-toc-text">自动读取字符集</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#压缩和解压缩"><span class="post-toc-number">2.</span> <span class="post-toc-text">压缩和解压缩</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#使用-argc-和-argv-读取命令行参数"><span class="post-toc-number">3.</span> <span class="post-toc-text">使用 argc 和 argv[] 读取命令行参数</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#压缩测试"><span class="post-toc-number">4.</span> <span class="post-toc-text">压缩测试</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(https://ae01.alicdn.com/kf/HTB1B6wzPIfpK1RjSZFOq6y6nFXaq.jpg)">
    
            <p class="article-headline-p">
                Huffman 编码・改：压缩文件
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="../../../../img/avatar.jpg" width="44px" height="44px" alt="Author Avatar">
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>✨小透明・宸✨</strong>
        <span>2019-04-13 16:06:43</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button" style="text-align: center;">
    <li class="mdl-menu__item" style="text-align: center;">在其它设备中阅读本文章</li>
    
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKQAAACkCAAAAAA83tqdAAACRklEQVR42u2c226DQAxE+f+fbl8jys6FUDVdH16iVIAP0dqZHTs9vv7BcQAJJJBAfgDkIY4fF7387Xze+Zr0vYoL5FzIy0X7EvzqplfBbdDTuSoukEBeJYICdkGTxLFxgQTSBHUL3T2QS0gggUxOXomNtJhf3RtIIBPIVOCuirZ6QHXOIyoIyO0gk5v9xutju0Ugt4KMjKNFIVbvXTF/3FUDchtIt8BXgjYRJEpYrL40gATSmaermyhTKhXGbwkMILeFVALWCY9GiDRxgJwNqRa+MlJdwFSgVMUcyBGQrXBVgkMV/cZoAHI2ZLKoXePIGfxJAkYqCMgxkE6k3m04pZu45aYNyJGQqqGkmu/qGjcckn4IQM6EbIfc0uRIGlc2IYEcC+lgmiamExTVICmQIyHbxZ8OhaZJVu0WgRwD6TZcTqAqI0ENN9UqCMgRkGnxVY2iO+Z/0qAHci7knWLdNNrT5LEOBpAjIJXIbTZn6uEigdsM1AG5NaQbVHfC1jWlkmH6arcI5AjIpNHUCF83UBd/KECOhGw28XcEbdJ8rxwMILeHTJrpDsglRio8gAQybcK7TdcTQ07SHAByFGQ67JaYrEpkOHPrdlMeyO0grZF5dP8gwRkHSmzEDgaQW0NGP5QojM9EVKQFHsi5kGnCJIXabcaqH28AORpSJUYiUF2D1CUqkECmkEnwZODTmQGX9wcSSJE474heZ9IukwjI0ZBtw1wV/DvGbOxgADkCMhl4T838tGDXzSYgx0B+8gEkkEAC+YfHN2UMlNOK/Gf5AAAAAElFTkSuQmCC">
    
</ul>

    

    <!-- Tags (bookmark) -->
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Huffman 编码・改：压缩文件&url=https://transparentlc.github.io&pic=https://transparentlc.github.io/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=存在感消失的地方|ω•`)&title=Huffman 编码・改：压缩文件&summary=&pics=https://transparentlc.github.io/img/favicon.png&url=https://transparentlc.github.io" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>嗯？小透明上次好像说过要用 C 语言实现的 Huffman 编码进行压缩文件的操作吧？(´っω･｡｀)</p>
<p>不会咕咕咕的，因为已经做出来惹～/( ˙ ꒳ ˙ )&gt;＼</p>
<p>用 C 语言实现 Huffman 编码的做法在<a href="/2019/04/06/huffman-tree/">上一篇</a>里已经说明得差不多了，本次踩的一些坑，基本上是在文件读写方面……</p>
<p><del>懒得找新的题图了，就继续用上次的吧</del></p>
<h1 id="自动读取字符集"><a href="#自动读取字符集" class="headerlink" title="自动读取字符集"></a>自动读取字符集</h1><p>严格来说，这里的“字符集”应该叫“字节集”才对～原来书上举例都是用“ABCD”这些字母，不过现在是对文件进行操作，编码的对象就应该是 <code>0x00</code> 到 <code>0xFF</code> 的二进制数据了( ´▽` )ﾉ</p>
<p>进行 Huffman 编码，需要读取字符和它们各自的权值作为编码依据。之前的作业只要求手动输入字符集和权值，不过面对一个有较大数据量的文件，手动输入显然是不现实的。所以需要通过读取一遍文件，自动对字符和权值进行统计，其中权值就是字节在文件中出现的次数。</p>
<p>先建立一个有 256 个元素的大数组，数组的下标代表字节，下标对应元素的值就可以用来记录字节出现的次数了～不过，一开始我还是这么写的：</p>
<pre><code class="c">//从文件中读取字节集信息
//fp为读取的文件，字节种类数存在size，每个字节和它的出现次数存在set和weight
void LoadByteSet(FILE *fp, unsigned int *size, unsigned char **set, unsigned int **weight) {
    //先为0x00到0xFF的字节分配计数用存储空间，下标就是对应字节在文件中出现的次数
    unsigned int *FullWeight = calloc(256, sizeof(unsigned int));

    while(!feof(fp)) {
        FullWeight[fgetc(fp)]++;
    }

    //中间过程略

    free(FullWeight);
}
</code></pre>
<p>好像没什么问题，不过进行到最后的 <code>free()</code> 这里就报错了？！</p>
<p><img src="https://ae01.alicdn.com/kf/HTB1j_4CdK3tHKVjSZSg7604QFXaR.png" alt></p>
<p>尝试着查了一下这个“<strong>before</strong> Normal block”的报错信息，结果整个 Stack Overflow 上都只有对于“<strong>after</strong> Normal block”的讨论，后面这个是使用 <code>malloc()</code> 分配内存进行操作但是空间不足（进行操作的位置在分配的内存后面）的时候经常会碰到的错误。</p>
<p><img src="https://ae01.alicdn.com/kf/HTB14YcSQxYaK1RjSZFn76180pXav.png" alt></p>
<p>一开始小透明以为是 <code>fgetc()</code> 返回值类型的问题，毕竟这个函数返回的是 <code>int</code> 而不是一字节的 <code>(unsigned) char</code>。所以先加了个强制类型转换：</p>
<pre><code class="c">while(!feof(fp)) {
    FullWeight[(unsigned char)fgetc(fp)]++;
}
</code></pre>
<p>之后再 <code>free()</code> 就没有报错了，但是字节出现次数的统计中居然多出了一个 <code>0xFF</code>？看来是还没有从本质上解决问题(°ー°〃)</p>
<p>实际上，在读取到文件末尾的时候，<code>fgetc()</code> 不能继续读出字符，会返回一个 <code>0xFFFFFFFF</code>，然后才会修改 <code>fp</code> 使 <code>feof(fp)</code> 为真。先前的做法中，这个时候执行的就是 <code>FullWeight[0xFFFFFFFF]++</code>，所以是哪个字节自增了呢……总之不是分配的内存范围内就是了(•́ω•̀ ٥) 加上了强制类型转换以后，<code>0xFFFFFFFF</code> 被截断为 <code>0xFF</code>，会被当成是读取了 <code>0xFF</code> 这个字节，也会对统计结果造成影响。</p>
<p>使用一个 For 循环，将文件大小作为循环结束的依据，就轮不到最后这个 <code>0xFFFFFFFF</code> 来捣乱了：</p>
<pre><code class="c">//获取文件大小
fseek(fp, 0L, SEEK_END);
unsigned long long FileSize = ftell(fp);
fseek(fp, 0L, SEEK_SET);

for (unsigned long long i = 0; i &lt; FileSize; i++) {
    FullWeight[fgetc(fp)]++;
}

//也可以用一个int类型的变量先接住fgetc()的返回值，如果返回值是0xFFFFFFFF就结束循环
</code></pre>
<p>把所有字节的出现次数统计完了，是不是就可以直接拿着这个有 256 个元素的大数组去生成 Huffman 树了呢？虽然这样也没关系，不过所有字节中可能会有一些出现次数为 0 的字节，它们也会对生成的编码造成影响……</p>
<p>有两个字符集，字符出现的比例分别是 <code>A:B:C:D = 7:0:2:3</code> 和 <code>A:C:D = 7:2:3</code>，去掉根本不会出现的字符 B 实际上是一样的。现在对它们分别求 Huffman 树和编码表：</p>
<p>（为了能直观看出差别，小透明手动用字符把树画出来了_(•̀ω•́ 」∠)_ 如果你的设备不是用等宽字体显示这里的代码的话，示意图大概就会乱掉吧……）</p>
<pre><code class="plain">A:B:C:D = 7:0:2:3的H树：
0 w:  0 p:  0 lc:  0 rc:  0
1 w:  7 p:  7 lc:  0 rc:  0
2 w:  0 p:  5 lc:  0 rc:  0
3 w:  2 p:  5 lc:  0 rc:  0
4 w:  3 p:  6 lc:  0 rc:  0
5 w:  2 p:  6 lc:  2 rc:  3
6 w:  5 p:  7 lc:  4 rc:  5
7 w: 12 p:  0 lc:  1 rc:  6

     12
    /  \
(A)7    5
       / \
   (D)3   2
         / \
     (B)0   2(C)

字符对应的编码：
A 0
B 110
C 111
D 10

A:C:D = 7:2:3的H树：
0 w:  0 p:  0 lc:  0 rc:  0
1 w:  7 p:  5 lc:  0 rc:  0
2 w:  2 p:  4 lc:  0 rc:  0
3 w:  3 p:  4 lc:  0 rc:  0
4 w:  5 p:  5 lc:  2 rc:  3
5 w: 12 p:  0 lc:  1 rc:  4

     12
    /  \
(A)7    5
       / \
   (C)2   3(D)

字符对应的编码：
A 0
C 10
D 11
</code></pre>
<p>可以看到，虽然 B 的权为 0，但它仍然“延长”了求编码的路径，结果就是字符 C 的编码被不必要地增加了一个二进制位，这样当然是不好的啊喂！(╯‵□′)╯︵┻━┻</p>
<p>所以我们得从那个数组中去掉没有出现过的字节，再拿去生成 Huffman 编码～这个数组可以当成一个线性表，所以我们要进行的就是删除的操作：删除一项，把之后的每一项都往前挪一点……不行，这样的效率太低了( ‘-‘ )ノ)`-‘ ) 不如“用空间换时间”，再新建一个数组，把出现过的字节和出现次数单独存进去，这个函数也就写完了～</p>
<pre><code class="c">//从文件中读取字节集信息
//fp为读取的文件，字节种类数存在size，每个字节和它的出现次数存在set和weight
void LoadByteSet(FILE *fp, unsigned int *size, unsigned char **set, unsigned int **weight) {
    //先为0x00到0xFF的字节分配计数用存储空间，下标就是对应字节在文件中出现的次数
    unsigned int *FullWeight = calloc(256, sizeof(unsigned int));

    //获取文件大小
    fseek(fp, 0L, SEEK_END);
    unsigned long long FileSize = ftell(fp);
    fseek(fp, 0L, SEEK_SET);

    for (unsigned long long i = 0; i &lt; FileSize; i++) {
        FullWeight[fgetc(fp)]++;
    }

    //求出一共出现了多少种字节
    *size = 0;
    for (unsigned int i = 0x00; i &lt;= 0xFF; i++) {
        if (FullWeight[i]) {
            (*size)++;
        }
    }

    //输出字节和计数数据
    *set = malloc(*size * sizeof(unsigned char));
    *weight = malloc(*size * sizeof(unsigned int));
    unsigned char *setP = *set;
    unsigned int *weightP = *weight;
    for (unsigned int i = 0x00; i &lt;= 0xFF; i++) {
        if (FullWeight[i]) {
            *setP = i;
            *weightP = FullWeight[i];
            setP++;
            weightP++;
        }
    }

    free(FullWeight);
}
</code></pre>
<h1 id="压缩和解压缩"><a href="#压缩和解压缩" class="headerlink" title="压缩和解压缩"></a>压缩和解压缩</h1><p>之前的作业只要求把 Huffman 树保存成一个文件，把编码后的数据保存到另外一个文件。</p>
<blockquote>
<p>呐，有哪种压缩文件是除了数据本体还要“拖家带口”的吗？</p>
</blockquote>
<p>要解决这个也不难，把 Huffman 树的数据放在文件的前半部分，编码后的数据放在后半部分，这样就可以只输出一个文件了～实际上是把上面两个文件直接合并到一起了(　-`ω-)✧</p>
<p>压缩和解压缩的实现和<a href="/2019/04/06/huffman-tree/index.html#%E5%AF%B9%E6%96%87%E6%9C%AC%E8%BF%9B%E8%A1%8C%E7%BC%96%E7%A0%81%E5%92%8C%E8%A7%A3%E7%A0%81">上一篇</a>的描述几乎没什么区别，不过在这里还是先总结一下各自的步骤：</p>
<ul>
<li><p>压缩步骤：建 Huffman 树，建编码表，存字符集，存 Huffman 树，存数据</p>
</li>
<li><p>解压步骤：读字符集，读 Huffman 树，建编码表，读数据</p>
</li>
</ul>
<p>以下就是和上次<del>几乎没有什么差别</del>的代码～代码中 <code>DeCompFileName</code> 是未压缩的文件名，<code>CompFileName</code> 是已压缩的文件名。另外小透明还加上了在压缩/解压缩完成后，输出文件压缩率的功能ヾ(•ω•`。)</p>
<pre><code class="c">//压缩部分
//压缩步骤：建树，建表，存字符集，存树，存数据

fopen_s(&amp;fpDeComp, DeCompFileName, &quot;rb&quot;);
if (!fpDeComp) {
    puts(&quot;Input file does not exist.&quot;);
    return 0;
}
fopen_s(&amp;fpComp, CompFileName, &quot;wb&quot;);

LoadByteSet(fpDeComp, &amp;ByteSetSize, &amp;ByteSet, &amp;ByteWeight);

/* 建树建表 */
HuffmanCoding(&amp;HT, &amp;HC, ByteWeight, ByteSetSize);

/* 存字符集 */
fwrite(&amp;ByteSetSize, sizeof(ByteSetSize), 1, fpComp);
fwrite(ByteSet, sizeof(unsigned char), ByteSetSize, fpComp);
fwrite(ByteWeight, sizeof(unsigned int), ByteSetSize, fpComp);

/* 存树 */
fwrite(HT, sizeof(HTNode), 2 * ByteSetSize, fpComp);

/* 存数据 */
fseek(fpDeComp, 0L, SEEK_END);
FileSize = ftell(fpDeComp);
fseek(fpDeComp, 0L, SEEK_SET);
CodeSize = 0;
Offset = 7;
Byte = 0;
//对TextFile中的每个字符进行编码
for (unsigned long long i = 0; i &lt; FileSize; i++) {
    fread(&amp;Read, sizeof(char), 1, fpDeComp);
    //从编码表中查找对应的编码
    for (unsigned int j = 0; j &lt; ByteSetSize; j++) {
        if (ByteSet[j] == Read) {
            pCode = HC[j + 1];
            while (*pCode) {
                CodeSize++;
                WriteBit(&amp;Byte, Offset, *pCode - &#39;0&#39;);
                if (Offset) {
                    //字节没有写满，offset-1
                    Offset--;
                } else {
                    //字节写满了就写入文件，然后清空字节
                    Offset = 7;
                    fwrite(&amp;Byte, sizeof(unsigned char), 1, fpComp);
                    Byte = 0;
                }
                pCode++;
            }
            break;
        }
    }
}
//最后一个字节没有写满也要写入，没有写满的位都是0
if (Offset != 7) {
    fwrite(&amp;Byte, sizeof(unsigned char), 1, fpComp);
}
//在文件最后写入编码位数
fwrite(&amp;CodeSize, sizeof(unsigned long long), 1, fpComp);

/* 输出文件大小，统计压缩比 */
fseek(fpDeComp, 0L, SEEK_END);
InputSize = ftell(fpDeComp);
fseek(fpComp, 0L, SEEK_END);
OutputSize = ftell(fpComp);
printf(&quot;Input (Source): %lld Bytes\nOutput (Compressed): %lld Bytes\nCompression ratio: %.2lf%%&quot;, InputSize, OutputSize, (double)OutputSize / (double)InputSize * (double)100);

fclose(fpDeComp);
fclose(fpComp);
</code></pre>
<pre><code class="c">//解压部分
//解压步骤：读字符集，读树，建表，读数据

fopen_s(&amp;fpComp, CompFileName, &quot;rb&quot;);
if (!fpComp) {
    puts(&quot;Input file does not exist.&quot;);
    return 0;
}
fopen_s(&amp;fpDeComp, DeCompFileName, &quot;wb&quot;);

/* 读字符集 */
fread(&amp;ByteSetSize, sizeof(unsigned int), 1, fpComp);
ByteSet = malloc(ByteSetSize * sizeof(unsigned char));
ByteWeight = malloc(ByteSetSize * sizeof(unsigned int));
fread(ByteSet, sizeof(unsigned char), ByteSetSize, fpComp);
fread(ByteWeight, sizeof(unsigned int), ByteSetSize, fpComp);

/* 读树 */
HT = malloc(2 * ByteSetSize * sizeof(HTNode));
fread(HT, sizeof(HTNode), 2 * ByteSetSize, fpComp);

/* 建表 */
InitHuffmanCode(&amp;HC, HT, ByteSetSize);

/* 读数据 */
Index = 2 * ByteSetSize - 1;
//读取编码位数
fseek(fpComp, -1L * (long)sizeof(unsigned long long), SEEK_END);
fread(&amp;CodeSize, sizeof(unsigned long long), 1, fpComp);
//跳过文件头部保存的字符集和H树的信息
fseek(fpComp, (long)(sizeof(ByteSetSize) + ByteSetSize * (sizeof(unsigned char) + sizeof(unsigned int)) + 2 * ByteSetSize * sizeof(HTNode)), SEEK_SET);

Offset = 7;
fread(&amp;Byte, sizeof(unsigned char), 1, fpComp); //先读取一个字节
//对CodeFile中的每个位进行读取
for (unsigned long long i = 0; i &lt; CodeSize; i++) {
    Read = ReadBit(Byte, Offset);
    if (Read) {
        //读到1就移向右子树
        Index = HT[Index].rchild;
    } else {
        //读到0就移向右子树
        Index = HT[Index].lchild;
    }
    //移到叶子结点就写入字符，同时移回根结点
    if (!HT[Index].lchild &amp;&amp; !HT[Index].rchild) {
        fwrite(&amp;ByteSet[Index - 1], sizeof(unsigned char), 1, fpDeComp);
        Index = 2 * ByteSetSize - 1;
    }
    if (Offset) {
        //字节没有读完，offset-1
        Offset--;
    } else {
        //字节读完了就读下一个字节
        Offset = 7;
        fread(&amp;Byte, sizeof(unsigned char), 1, fpComp);
    }
}

/* 输出文件大小，统计压缩比 */
fseek(fpComp, 0L, SEEK_END);
InputSize = ftell(fpComp);
fseek(fpDeComp, 0L, SEEK_END);
OutputSize = ftell(fpDeComp);
printf(&quot;Input (Source): %lld Bytes\nOutput (Decompressed): %lld Bytes\nCompression ratio: %.2lf%%&quot;, InputSize, OutputSize, (double)InputSize / (double)OutputSize * (double)100);

fclose(fpComp);
fclose(fpDeComp);
</code></pre>
<h1 id="使用-argc-和-argv-读取命令行参数"><a href="#使用-argc-和-argv-读取命令行参数" class="headerlink" title="使用 argc 和 argv[] 读取命令行参数"></a>使用 <code>argc</code> 和 <code>argv[]</code> 读取命令行参数</h1><p>这一部分的内容和 Huffman 编码没有什么关系，不过既然小透明折腾了一下，那就把相关的内容也写在这里吧～</p>
<p>至少在小透明这里，《数据结构》的作业里除了实现指定操作，还会要求添加一个菜单，比如这样：</p>
<pre><code class="plain">-- 线性表的操作演示 --
1 - 插入元素
2 - 删除元素
3 - 输出所有元素的值
4 - 清空线性表
……
0 - 结束
请输入选项：
</code></pre>
<p>然鹅实际上不少命令行程序的根本就不是通过菜单来选择功能，而是使用一系列的命令行参数(っ’-‘)っ</p>
<p>比如知名的多媒体文件转码工具 <a href="https://ffmpeg.org/" target="_blank" rel="noopener">FFmpeg</a> <del>不要提格式工厂这种<a href="https://github.com/FiveYellowMice/how-to-convert-videos-with-ffmpeg-zh/blob/master/01-write-in-front.md#ffmpeg-%E6%98%AF%E4%BB%80%E4%B9%88%E6%88%91%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E5%AE%83" target="_blank" rel="noopener">不遵守开源协议</a>的人间之屑</del>：</p>
<pre><code class="plain">ffmpeg -i input.mp4 output.avi
</code></pre>
<p><code>-i input.mp4</code> 指定了输入文件，<code>output.avi</code>指定了输出文件。当然还可以输入更多参数，不过小透明折腾的这个压缩文件的小程序不需要做得这么复杂……需要设置的参数只有这些：</p>
<ol>
<li>模式设定：压缩/解压缩，用 <code>compress</code> 和 <code>decompress</code> 表示，也可以用 <code>c</code> 和 <code>d</code> 作为缩写～</li>
<li>输入文件路径</li>
<li>输出文件路径</li>
</ol>
<p>上学期<del>拿着“谭宝书”</del>学习 C 语言的时候有学到主函数可以写上 <code>argc</code> 和 <code>argv[]</code> 两个参数，分别表示执行程序时命令行参数的数量和内容，这次终于可以用上了～٩(ˊᗜˋ*)و</p>
<p>按照上面的设定，（合法地）执行这个小程序的命令行是以下之一：</p>
<pre><code class="plain">HuffmanCompress compress input.bin output.bin
HuffmanCompress c input.bin output.bin

HuffmanCompress decompress input.bin output.bin
HuffmanCompress d input.bin output.bin
</code></pre>
<p>以空格作为分割，每个参数的内容都存储在 <code>argv[]</code> 这个数组中。另外，参数不符合格式时，不少程序会直接输出参数的格式说明，这里也可以加上这样的功能(・▽・〃) 所以主函数可以写成这样：</p>
<pre><code class="c">int main(int argc, char *argv[]) {
    //变量定义略

    //argv[0]：程序本体的名字
    //argv[1]：操作类型：c/compress为压缩，d/decompress为解压
    //argv[2]：输入文件的路径
    //argv[3]：输出文件的路径
    //argv[1~3]不完整则直接输出使用说明

    if (argv[1] &amp;&amp; argv[2] &amp;&amp; argv[3] &amp;&amp; (!strcmp(argv[1], &quot;c&quot;) || !strcmp(argv[1], &quot;compress&quot;))) {
        DeCompFileName = argv[2];
        CompFileName = argv[3];
        //压缩部分略
    } else if (argv[1] &amp;&amp; argv[2] &amp;&amp; argv[3] &amp;&amp; (!strcmp(argv[1], &quot;d&quot;) || !strcmp(argv[1], &quot;decompress&quot;))) {
        CompFileName = argv[2];
        DeCompFileName = argv[3];
        //解压部分略
    } else {
        //参数不完整则输出使用说明
        puts(&quot;Compress:&quot;);
        puts(&quot;HuffmanCompress compress &lt;InputPath&gt; &lt;OutputPath&gt;&quot;);
        puts(&quot;HuffmanCompress c &lt;InputPath&gt; &lt;OutputPath&gt;&quot;);
        puts(&quot;&quot;);
        puts(&quot;Decompress:&quot;);
        puts(&quot;HuffmanCompress decompress &lt;InputPath&gt; &lt;OutputPath&gt;&quot;);
        puts(&quot;HuffmanCompress d &lt;InputPath&gt; &lt;OutputPath&gt;&quot;);
    }
    return 0;
}
</code></pre>
<h1 id="压缩测试"><a href="#压缩测试" class="headerlink" title="压缩测试"></a>压缩测试</h1><p>既然做出了压缩程序，当然是要给它投喂各种<del>奇怪的东西</del>进行压缩效果的测试啦～</p>
<table>
<thead>
<tr>
<th>测试文件</th>
<th style="text-align:right">源文件大小</th>
<th style="text-align:right">7-Zip 19.00 x64 “极速压缩”大小</th>
<th style="text-align:right">自制的 Huffman 压缩程序压缩大小</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://files.catbox.moe/c0ogsu.txt" target="_blank" rel="noopener">埃罗芒阿老师 一至七卷（GB2312 编码）</a></td>
<td style="text-align:right">1372637</td>
<td style="text-align:right">644420 (46.95%)</td>
<td style="text-align:right">1032914 (75.25%)</td>
</tr>
<tr>
<td><a href="https://files.catbox.moe/0hlkbj.txt" target="_blank" rel="noopener">随机生成的一堆 Lorem Ipsum</a></td>
<td style="text-align:right">277251</td>
<td style="text-align:right">73445 (26.49%)</td>
<td style="text-align:right">150432 (54.26%)</td>
</tr>
<tr>
<td><a href="https://ffmpeg.zeranoe.com/builds/win64/static/ffmpeg-4.1.1-win64-static.zip" target="_blank" rel="noopener">FFmpeg 4.1.1 主程序（win64 Static 版）</a></td>
<td style="text-align:right">62839296</td>
<td style="text-align:right">18323223 (29.16%)</td>
<td style="text-align:right">52933128 (84.24%)</td>
</tr>
<tr>
<td><a href="https://ae01.alicdn.com/kf/HTB1tprXQIfpK1RjSZFOq6y6nFXaK.jpg" target="_blank" rel="noopener">赤座灯里的图片<del>空白图</del>（Pixiv ID: 30730603）</a></td>
<td style="text-align:right">223785</td>
<td style="text-align:right">220656 (98.60%)</td>
<td style="text-align:right">231721 (103.55%)</td>
</tr>
<tr>
<td><a href="https://files.catbox.moe/ljxkzg.mp4" target="_blank" rel="noopener">自压《LoveLive! 2nd Season》NCED「どんなときもずっと」</a></td>
<td style="text-align:right">33100729</td>
<td style="text-align:right">32999590 (99.69%)</td>
<td style="text-align:right">33105300 (100.01%)</td>
</tr>
</tbody>
</table>
<ul>
<li>因为出现的字节种类较少，英文纯文本的压缩效果好于中文。</li>
<li>几乎所有压缩软件都不擅长对<strong>已经进行过有损压缩的</strong>多媒体文件进行进一步的压缩。</li>
<li>自制的这个程序压缩效果被 <a href="https://sparanoid.com/lab/7z/" target="_blank" rel="noopener">7-Zip</a> 吊打(;-_-) 不过目前主流的压缩算法结合了字典压缩等多种压缩方法，效果当然会比 Huffman 编码单独进行频率统计好上不少。比如 <code>AAAABBCCCD</code> 和 <code>CBADACABCA</code> 这两个字符串，显然前者比后者可以更充分地被压缩。如果使用 Huffman 编码，由于都是 <code>A:B:C:D = 4:2:3:1</code> 的比例，压缩的效果是一样的……</li>
</ul>
<hr>
<p>完整的源代码在<a href="https://github.com/TransparentLC/HuffmanCompress" target="_blank" rel="noopener">这里</a>了～(*´∀`)</p>
<p><a href="https://github.com/TransparentLC/HuffmanCompress/releases" target="_blank" rel="noopener">Release</a> 处有编译好的程序本体。</p>

        
                <blockquote style="margin: 2em 0 0;padding: 0.5em 1em;border-left: 3px solid #F44336;background-color: #F5F5F5;list-style: none;">
                    <p><strong>
                         
                            本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。
                        </strong>
                        <br>
                        <strong>本文链接：</strong><a href="https://transparentlc.github.io/2019/04/13/huffman-file-compressor/">https://transparentlc.github.io/2019/04/13/huffman-file-compressor/</a>
                    </p>
                </blockquote>
        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="../../19/use-hljs-in-material-theme/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="../../06/huffman-tree/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(../../../../img/sidebar_header.jpg); background-size: cover; background-position: center;">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="../../../../img/avatar.jpg" alt="✨小透明・宸✨'s avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown" style="background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.35), rgba(0, 0, 0, 0.5));">
        存在感满满的好孩子(´•ω•`)
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="https://zh.moegirl.org/%E9%98%BF%E5%8D%A1%E6%9E%97" target="_blank" title="\アッカリ～ン/">
                        
                        \アッカリ～ン/
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    
        <li>
            <a href="/about" title="关于">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于
            </a>
        </li>
        
    
        <li>
            <a href="https://github.com/TransparentLC" title="GitHub">
                
                    <i class="material-icons sidebar-material-icons">code</i>
                
                GitHub
            </a>
        </li>
        
    
        <li>
            <a href="https://git.io/AkarinNMB" title="阿卡林匿名版">
                
                    <i class="material-icons sidebar-material-icons">forum</i>
                
                阿卡林匿名版
            </a>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">3</span>
            </a>
        </li>
        
    
    
    <!-- Page and All Site PV -->
    
        <li>
            <a href="#">
                <span id="busuanzi_container_page_pv">本页浏览量<span id="busuanzi_value_page_pv" class="sidebar-badge">Loading...</span></span>
            </a>
        </li>
        <li>
            <a href="#">
                <span id="busuanzi_container_site_pv">本站浏览量<span id="busuanzi_value_site_pv" class="sidebar-badge">Loading...</span></span>
            </a>
        </li>
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year></span>&nbsp;✨小透明・宸✨
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/js/lazyload.min.js", true)</script>



    <script>lsloader.load("js_js","https://cdn.jsdelivr.net/gh/viosey/hexo-theme-material@latest/source/js/js.min.js", true)</script>



    <script>lsloader.load("np_js","https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#db4d6d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #db4d6d, 0 0 15px #db4d6d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#db4d6d',
        'border-left-color': '#db4d6d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script src="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js"></script>







<!-- Make a difficult decision :) -->
<!--<script src="/js/fuckWechat.js"></script>-->
<!--<script src="/js/fuckEvilBrowser.js"></script>-->

<!-- Import prettify js  -->



<!-- Import highlight.js -->
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@latest/build/highlight.min.js"></script>
<script>
    Array.from(document.querySelectorAll("pre code")).forEach(function(codeBlock){
        codeBlock.innerHTML = "<li>" + codeBlock.innerHTML.replace(/\n/g, "\n</li><li>") + "\n</li>";
    });

    hljs.initHighlightingOnLoad();
</script>

<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect: 'fadeIn'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 0000;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>
                </main>
            </div>
        </body>
    
</html>
